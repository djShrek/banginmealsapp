<h1>Editing Meal</h1>

<div class="row edit-meal-form clearfix">
  <div class="col-xs-6">
    <%= form_for :meal, url: admin_meal_path(@meal), class: "form-horizontal", method: :patch do |f| %>

      <% if @meal.errors.any? %>
        <div id="error_explanation">
          <h2>
            <%= pluralize(@meal.errors.count, "error") %> prohibited
            this article from being saved:
          </h2>
          <ul>
            <% @meal.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-group col-xs-12">
        <%= f.label :name, class: "col-sm-2 control-label" %>
        <div class="col-xs-10">
          <%= f.text_field :name, class: "form-control" %>
        </div>
      </div>

      <div class="form-group col-xs-12">
        <%= f.label :description, class: "col-sm-2 control-label" %>
        <div class="col-xs-10">
          <%= f.text_area :description, class: "form-control" %>
        </div>
      </div>

      <div class="form-group col-xs-12">
        <%= f.label :price, class: "col-sm-2 control-label" %>
        <div class="col-xs-10">
          <%= f.text_field :price, class: "form-control" %>
        </div>
      </div>

      <div class="form-group col-xs-12">
        <%= f.label :active, class: "col-sm-2 control-label" %>
        <div class="col-xs-10">
          <%= f.check_box :status, {}, "active", "inactive"   %>
        </div>
      </div>

      <div class="form-group col-xs-12">
        <div class="col-md-3 col-md-offset-2">
          <%= select(:meal, :type, [["Clean Meal", "CleanMeal"], ["Specialty Meal", "SpecialtyMeal"]]) %>
        </div>
      </div>

      <div class="form-group col-xs-12">
        <div class="col-md-3 col-md-offset-2">
          <%= f.file_field :images, multiple: true %>
        </div>
      </div>

      <p class="form-group">
        <div class="image">
          <%= image_tag @meal.image if @meal.image.present? %>
        </div>
      </p>

      <div class="form-group col-xs-12">
        <div class="col-md-3 col-md-offset-2">
          <%= f.submit "Submit", class: "btn btn-default" %>
        </div>
      </div>

      <div class="form-group col-md-8 col-md-offset-4">
        <%= link_to 'Back', admin_meals_path,
            class: "btn btn-default",
            role: "button" %>
      </div>
    <% end %>
  </div>

  <div class="col-xs-6">
    <% if @meal.images.present? %>
      <% @meal.images.each_with_index do |image, index| %>
        <div class="col-xs-4">
          <%= image_tag image, class: "img-responsive" %>
          <%= link_to "Delete", { controller: :meals, action: :delete_image, image_id: index },
              method: :delete,
              data: { confirm: "Are you sure you want to delete this image?" } %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
